import{r as e,j as s,aw as t,M as l,a9 as a,a7 as r}from"./index-DgUKgk1k.js";const i=({isOpen:i,onClose:n,previewUrl:d,isGenerating:o,isStale:x,error:c,onRefresh:m,onDownload:b})=>{const[g,h]=e.useState(0),u=e.useRef(null);return e.useEffect(()=>{d&&h(e=>e+1)},[d]),e.useEffect(()=>{const e=e=>{"Escape"===e.key&&i&&n()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[i,n]),e.useEffect(()=>(document.body.style.overflow=i?"hidden":"",()=>{document.body.style.overflow=""}),[i]),i?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[9998] transition-opacity duration-200",onClick:n}),s.jsx("div",{className:"fixed z-[9999] inset-0 flex items-end lg:items-center lg:justify-center animate-fade-in",children:s.jsxs("div",{className:"bg-white rounded-t-2xl lg:rounded-2xl shadow-2xl w-full lg:max-w-5xl lg:mx-4 max-h-[95vh] lg:max-h-[90vh] flex flex-col animate-slide-up lg:animate-scale-in",onClick:e=>e.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between p-4 lg:p-6 border-b border-gray-200 flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("h2",{className:"text-lg lg:text-xl font-semibold text-gray-800",children:"PDF Preview"}),x&&!o&&s.jsxs("span",{className:"flex items-center gap-1 text-xs lg:text-sm text-amber-600 bg-amber-50 px-2 py-1 rounded-full",children:[s.jsx(t,{className:"text-sm"}),"Outdated"]})]}),s.jsx("button",{onClick:n,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",title:"Close (ESC)",children:s.jsx(l,{className:"text-xl"})})]}),x&&!o&&s.jsxs("div",{className:"bg-amber-50 border-b border-amber-200 px-4 py-3 flex items-center justify-between flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-2 text-amber-800",children:[s.jsx(t,{className:"text-lg flex-shrink-0"}),s.jsx("span",{className:"text-sm",children:'Your edits aren\'t reflected yet. Click "Refresh Preview" to see latest changes.'})]}),s.jsxs("button",{onClick:m,className:"flex items-center gap-1.5 px-3 py-1.5 bg-amber-600 text-white rounded-lg text-sm font-medium hover:bg-amber-700 transition-colors",children:[s.jsx(a,{className:"text-base"}),"Refresh"]})]}),s.jsxs("div",{className:"flex-1 overflow-auto bg-gray-100 relative",style:{WebkitOverflowScrolling:"touch"},children:[o&&s.jsxs("div",{className:"absolute inset-0 bg-white/80 backdrop-blur-sm flex flex-col items-center justify-center z-10",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-600 border-t-transparent mb-4"}),s.jsx("p",{className:"text-gray-700 font-medium mb-2",children:"Generating PDF preview..."}),s.jsx("p",{className:"text-gray-500 text-sm",children:"This usually takes 2-5 seconds"})]}),c&&!o&&s.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-white",children:s.jsxs("div",{className:"text-center p-8",children:[s.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(t,{className:"text-3xl text-red-600"})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Preview Generation Failed"}),s.jsx("p",{className:"text-gray-600 mb-6 max-w-md",children:c}),s.jsxs("button",{onClick:m,className:"flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors mx-auto",children:[s.jsx(a,{className:"text-lg"}),"Try Again"]})]})}),d&&!c&&s.jsx("div",{className:"w-full h-full p-4 lg:p-6",style:{display:"flex",justifyContent:"center",alignItems:"flex-start"},children:s.jsx("iframe",{ref:u,src:`${d}#toolbar=0&navpanes=0&scrollbar=1&view=FitH`,title:"Resume PDF Preview",className:"bg-white shadow-lg rounded-lg w-full h-full",style:{maxWidth:"900px",minHeight:"500px",border:"none"}},g)}),!d&&!c&&!o&&s.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-white",children:s.jsxs("div",{className:"text-center p-8",children:[s.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(r,{className:"text-3xl text-blue-600"})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"No Preview Available"}),s.jsx("p",{className:"text-gray-600 mb-6",children:'Click "Generate Preview" to see your resume'}),s.jsx("button",{onClick:m,className:"flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors mx-auto",children:"Generate Preview"})]})})]}),s.jsxs("div",{className:"border-t border-gray-200 bg-white flex-shrink-0",children:[s.jsxs("div",{className:"p-4 lg:p-6 grid grid-cols-2 gap-3 lg:flex lg:justify-end",children:[s.jsxs("button",{onClick:m,disabled:o,className:"flex items-center justify-center gap-2 px-4 lg:px-6 py-3.5 bg-white border-2 border-gray-300 text-gray-700 rounded-xl font-medium hover:bg-gray-50 hover:border-gray-400 disabled:opacity-50 disabled:cursor-not-allowed transition-all active:scale-[0.98] min-h-[52px]",style:{WebkitTapHighlightColor:"transparent"},children:[o?s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-gray-600 border-t-transparent"}):s.jsx(a,{className:"text-xl"}),s.jsx("span",{className:"hidden sm:inline",children:x?"Refresh Preview":"Regenerate"}),s.jsx("span",{className:"sm:hidden",children:"Refresh"})]}),s.jsxs("button",{onClick:b,disabled:o||!d,className:"flex items-center justify-center gap-2 px-4 lg:px-6 py-3.5 bg-gradient-to-r from-emerald-600 to-green-600 text-white rounded-xl font-semibold hover:from-emerald-500 hover:to-green-500 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl transition-all active:scale-[0.98] min-h-[52px]",style:{WebkitTapHighlightColor:"transparent"},children:[s.jsx(r,{className:"text-xl"}),s.jsx("span",{children:"Download"})]})]}),s.jsx("div",{style:{paddingBottom:"max(0.5rem, env(safe-area-inset-bottom))"}})]})]})})]}):null};export{i as P};
